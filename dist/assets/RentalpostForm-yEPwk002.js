import{u as G,r as a,j as e}from"./index-rPIBIrLb.js";const A=["Footwear","Clothing","Packs & Bags","Shelter","Sleep System","Trekking Poles","Navigation & Safety","Lighting","Cooking","Water","Hygiene & Repair","First Aid & Emergency","Sun & Insect","Electronics & Power","Comfort/Misc"];function L(o="rent"){return`${o}_${Math.random().toString(36).slice(2,9)}${Date.now()}`}function T(o,s){try{const i=localStorage.getItem(o);return i?JSON.parse(i):s}catch{return s}}function F(o,s){localStorage.setItem(o,JSON.stringify(s))}function _(){const o=G(),[s,i]=a.useState(""),[b,w]=a.useState(""),[d,S]=a.useState(""),[h,P]=a.useState(""),[n,C]=a.useState(""),[c,k]=a.useState(""),[p,R]=a.useState(""),[x,q]=a.useState(""),[u,f]=a.useState([]),[v,N]=a.useState("");function E(){if(!s.trim())return"Please enter a title.";if(!b.trim())return"Please enter a description.";const r=Number(d);if(!d||isNaN(r)||r<1)return"Please enter a valid quantity (at least 1).";const t=Number(n);if(!n||isNaN(t)||t<=0)return"Enter a valid price per hour.";const l=Number(c);return!c||isNaN(l)||l<0?"Enter a valid deposit (0 or more).":p?"":"Please choose a category."}async function I(r){r.preventDefault();const t=E();if(t){N(t);return}async function l(B){return(await Promise.all(B.map(U=>new Promise(y=>{const m=new FileReader;m.onload=()=>y(String(m.result||"")),m.onerror=()=>y(""),m.readAsDataURL(U)})))).filter(Boolean)}const j=await l(u),g={id:L(),title:s.trim(),category:p,pricePerHourGBP:Number(n),dailyGBP:Number(n),depositGBP:Number(c),stock:Number(d),weight:h.trim(),description:b.trim(),images:[...j,...x.trim()?[x.trim()]:[]].slice(0,10),rating:4.8},D=T("rental_items",[]);F("rental_items",[g,...D]),o("/admin")}return e.jsxs("div",{className:"max-w-2xl mx-auto bg-white p-8 rounded-2xl shadow-lg mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-emerald-700",children:"Post a Rental Item"}),v&&e.jsx("div",{className:"mb-4 text-rose-600 font-semibold",children:v}),e.jsxs("form",{className:"space-y-5",onSubmit:I,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Title *"}),e.jsx("input",{className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:s,onChange:r=>i(r.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Description *"}),e.jsx("textarea",{className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",rows:3,value:b,onChange:r=>w(r.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Category *"}),e.jsxs("select",{className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:p,onChange:r=>R(r.target.value),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Choose a category"}),A.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Qty / Capacity *"}),e.jsx("input",{type:"number",min:1,className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:d,onChange:r=>S(r.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Weight"}),e.jsx("input",{className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",placeholder:"e.g., 1.2 kg",value:h,onChange:r=>P(r.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Price per hour (GBP) *"}),e.jsx("input",{type:"number",min:0,step:.01,className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:n,onChange:r=>C(r.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Deposit (GBP) *"}),e.jsx("input",{type:"number",min:0,step:.01,className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:c,onChange:r=>k(r.target.value),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Image URL (optional)"}),e.jsx("input",{className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",placeholder:"https://...",value:x,onChange:r=>q(r.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Add Images (up to 10)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:r=>{const t=Array.from(r.target.files||[]);if(u.length+t.length>10){N("You can upload up to 10 images.");return}f(l=>[...l,...t].slice(0,10))},className:"block"}),u.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:u.map((r,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:URL.createObjectURL(r),alt:"preview",className:"h-20 w-20 object-cover rounded-xl border border-emerald-200"}),e.jsx("button",{type:"button",onClick:()=>f(l=>l.filter((j,g)=>g!==t)),className:"absolute -top-1 -right-1 bg-rose-600 text-white rounded-full p-1 text-xs opacity-80 group-hover:opacity-100","aria-label":"Remove image",children:"Ã—"})]},t))})]}),e.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white font-bold py-2 rounded-xl hover:bg-emerald-700 transition",children:"Post Rental"})]})]})}export{_ as default};
