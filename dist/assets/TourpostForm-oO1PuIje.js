import{u as E,r as s,j as e}from"./index-rPIBIrLb.js";const I=[{label:"Hiking",value:"hiking"},{label:"Cycling",value:"cycling"},{label:"Nature Walks",value:"nature_walks"}];function G(){const f=E(),[o,g]=s.useState(""),[n,v]=s.useState(""),[j,N]=s.useState(""),[i,y]=s.useState(""),[d,w]=s.useState(""),[c,k]=s.useState(""),[u,S]=s.useState(""),[m,C]=s.useState(""),[D,q]=s.useState([]),[b,x]=s.useState([]),[h,r]=s.useState("");function P(l){q(a=>a.includes(l)?a.filter(t=>t!==l):[...a,l])}function T(l){if(!l.target.files)return;const a=Array.from(l.target.files);if(a.length+b.length>10){r("You can upload up to 10 images.");return}x(t=>[...t,...a].slice(0,10)),r("")}function L(l){x(a=>a.filter((t,p)=>p!==l))}async function A(l){if(l.preventDefault(),!o||!n||!i||!d||!c||!u||!m){r("Please fill all required fields.");return}const a=new FormData;a.append("title",o),a.append("location",n),a.append("durationDays",i),a.append("nextStartDate",d),a.append("availableSlots",c),a.append("priceGBP",u),a.append("description",m),b.forEach(t=>a.append("images",t));try{const t=await fetch("http://localhost:3001/api/tours",{method:"POST",body:a});if(!t.ok){const p=await t.json().catch(()=>({}));throw new Error(p.error||"Failed to post tour")}f("/tours")}catch(t){r(t.message||"Failed to post tour")}}return e.jsxs("div",{className:"max-w-2xl mx-auto bg-white p-8 rounded-2xl shadow-lg mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-emerald-700",children:"Post a New Tour"}),h&&e.jsx("div",{className:"mb-4 text-red-600 font-semibold",children:h}),e.jsxs("form",{className:"space-y-5",onSubmit:A,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Title *"}),e.jsx("input",{className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:o,onChange:l=>g(l.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Location *"}),e.jsx("input",{className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:n,onChange:l=>v(l.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Google Map Link"}),e.jsx("input",{className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:j,onChange:l=>N(l.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Duration (days) *"}),e.jsx("input",{type:"number",min:"1",className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:i,onChange:l=>y(l.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Next Start Date *"}),e.jsx("input",{type:"date",className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:d,onChange:l=>w(l.target.value),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Available Slots *"}),e.jsx("input",{type:"number",min:"1",className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:c,onChange:l=>k(l.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Price (GBP) *"}),e.jsx("input",{type:"number",min:"1",className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",value:u,onChange:l=>S(l.target.value),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Description *"}),e.jsx("textarea",{className:"w-full rounded-xl border border-emerald-300 px-3 py-2 focus:border-emerald-500 outline-none",rows:3,value:m,onChange:l=>C(l.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Activities"}),e.jsx("div",{className:"flex gap-4",children:I.map(l=>e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:D.includes(l.value),onChange:()=>P(l.value),className:"accent-emerald-600"}),l.label]},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Media Upload (up to 10 images)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:T,className:"block"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map((l,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:URL.createObjectURL(l),alt:"preview",className:"h-20 w-20 object-cover rounded-xl border border-emerald-200"}),e.jsx("button",{type:"button",onClick:()=>L(a),className:"absolute top-0 right-0 bg-rose-600 text-white rounded-full p-1 text-xs opacity-80 group-hover:opacity-100",children:"Ã—"})]},a))})]}),e.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white font-bold py-2 rounded-xl hover:bg-emerald-700 transition",children:"Post Tour"})]})]})}export{G as default};
